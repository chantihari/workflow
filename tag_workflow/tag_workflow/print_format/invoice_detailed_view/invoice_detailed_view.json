{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2022-11-25 14:10:04.253654",
 "css": ".print-main-section .right-align {\n    text-align:right;\n    padding-top:10px;\n}\n.print-main-section table {\n    width:100%;\n}\n.print-main-section .logo{\n    max-width: max-content;\n}\n.pt-1 {\n    padding-top:10px;\n}\np {\n    font-size:14px;\n}\n.due-payment {\n    width: 55%;\n    padding: 5px 15px;\n    margin-top: 20px;\n    border: 1px solid #dee2e6;\n    text-align: left;\n    float: right;\n}\n.due-payment p {\n    font-size: 16px;\n    font-weight: 500;\n}\n.due-payment label {\n        font-weight: 400;\n    margin: 10px 0 5px 0;\n    text-align: left;\n}\n.comments {\n    text-align: justify;\n}\n.custom-comment {\n    height: 75px;\n    overflow: hidden;\n    color: #6c757d!important;\n    font-size:13px!important;\n}\n.description h5 {\n    font-weight:700 !important;\n}\n.job-description {\n   margin:30px 0;\n   font-size:14px;\n}\n.job-description label {\n        font-weight: normal;\n        margin: 7px 0;\n        color: #6c757d;\n}\n.job-description p {\n    font-weight:500;\n}\n.footer-text{\n    text-align: right;\n    font-size: 16px;\n    font-weight: 500;\n}\n\n.address label { width: 85%;\n}\n.print-format td {\n   width: 25%;\n}\n.table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th {\n    font-weight: 500 !important;\n    padding: 12px !important;\n    text-align: left;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "font_size": 0,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Invoice</div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2>\\n<h3>dbhcjsjvbhj</h3>\\n\\n{{doc.timesheets}}jbhxbhbh</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"job_order\", \"print_hide\": 0, \"label\": \"Job Order\"}, {\"fieldname\": \"posting_date\", \"print_hide\": 0, \"label\": \"Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"grand_total\", \"print_hide\": 0, \"label\": \"Grand Total\"}]",
 "html": "{% set amount = doc.total_billing_amount if doc.invoice_premium == 0 else doc.total_billing_amount_premium %}\n{% set company = doc.accounts_receivable_name if doc.accounts_receivable_name else doc.company %}\n{% set com_rec_email = doc.accounts_receivable_rep_email if doc.accounts_receivable_rep_email %}\n{% set customer = doc.accounts_payable_contact_name if doc.accounts_payable_contact_name else doc.customer %}\n{% set cus_pay_email = doc.accounts_payable_email if doc.accounts_payable_email %}\n{% set com_rec_phone= doc.accounts_receivable_phone_number if doc.accounts_receivable_phone_number %}\n{% set cus_pay_phone = doc.accounts_payable_phone_number if doc.accounts_payable_phone_number %}\n<div class=\"print-main-section table-responsive\">\n    <table>\n        <tr>\n            <td colspan=\"2\">\n                <div class=\"logo\">\n                    <img class=\"app-logo\" src=\"/assets/tag_workflow/images/TAG-Logo.png\" />\n                </div>\n            </td>\n            <td colspan=\"2\" class=\"right-align\">\n                <div class=\"pt-1\">{{frappe.format_date(doc.posting_date)}}</div>\n            </td>\n        </tr>\n        <tr>\n            <td colspan=\"2\">\n                <h1>\n                    Invoice\n                </h1>\n                <div>\n                    <p class=\"invoice-name\">{{doc.name}}</p>\n                </div>\n            </td>\n            <td colspan=\"2\" class=\"right-align\">\n                <div class=\"due-payment\">\n                    <p>Payment Due</p>\n                    <label>{{\"$%.2f\"|format(amount)}}</label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <div class=\"job-description\">\n                    <p> Job Order ID </p>\n                    <label>\n                        {{doc.job_order}}\n                    </label>\n                </div>\n            </td>\n            <td>\n                <div class=\"job-description\">\n                    <p> Date </p>\n                    <label>\n                        {{frappe.format_date(doc.posting_date)}}\n                    </label>\n                </div>\n            </td>\n            <td>\n                <div class=\"job-description\">\n                    <p> Due Date </p>\n                    <label>\n                        {{frappe.format_date(doc.due_date)}}\n                    </label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td colspan=\"2\">\n                <div class=\"job-description address\">\n                    <p> Staffing Address </p>\n                    <label>\n                        {% if company %}\n                        <p class=\"invoice-name\">{{company}}</p>\n                        {% endif %}\n                        {% if com_rec_email %}\n                        <p class=\"invoice-name\">{{com_rec_email}}</p>\n                        {% endif %}\n                        {% if com_rec_phone %}\n                        <p class=\"invoice-name\">{{com_rec_phone}}</p>\n                        {% endif %}\n                        {% if doc.creater_company %}\n                        <p class=\"invoice-name\">{{doc.creater_company}}</p>\n                        {% endif %}\n                        {% if doc.creater_city %}\n                        <p class=\"invoice-name\">{{doc.creater_city}}</p>\n                        {% endif %}\n                        {% if doc.creater_state %}\n                        <p class=\"invoice-name\">{{doc.creater_state}}</p>\n                        {% endif %}\n                        {% if doc.creater_zip %}\n                        <p class=\"invoice-name\">{{doc.creater_zip}}</p>\n                        {%endif%}\n                    </label>\n                </div>\n            </td>\n\n            <td colspan=\"2\">\n                <div class=\"job-description address\">\n                    <p> Hiring Address</p>\n                    <label>\n                        {% if customer%}\n                        <p class=\"invoice-name\">{{customer}}</p>\n                        {% endif%}\n                        {% if cus_pay_email %}\n                        <p class=\"invoice-name\">{{cus_pay_email}}</p>\n                        {% endif %}\n                        {% if cus_pay_phone %}\n                        <p class=\"invoice-name\">{{cus_pay_phone}}</p>\n                        {% endif %}\n                        {% if doc.for_company%}\n                        <p class=\"invoice-name\">{{doc.for_company}}</p>\n                        {% endif %}\n                        {% if doc.for_company_city%}\n                        <p class=\"invoice-name\">{{doc.for_company_city}}</p>\n                        {% endif %}\n                        {% if doc.for_company_state%}\n                        <p class=\"invoice-name\">{{doc.for_company_state}}</p>\n                        {% endif %}\n                        {% if doc.for_company_zip%}\n                        <p class=\"invoice-name\">{{doc.for_company_zip}}</p>\n                        {% endif %}\n                    </label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td colspan=\"2\">\n                <div class=\"comments\">\n                    {% if doc.invoice_comments and doc.invoice_comments.strip()%}\n                    <p>Staffing Comments</p>\n                    <p class=\"custom-comment\">{{doc.invoice_comments}}</p>\n                    {% endif %}\n                </div>\n            </td>\n            <td colspan=\"2\">\n                <div class=\"comments\">\n                    {% set hiring_comment = frappe.db.get_value('Assign Employee', {'job_order': doc.job_order , 'tag_status':'Approved', 'company': doc.company}, ['notes']) %}\n                    {% if hiring_comment and hiring_comment.strip() %}\n                    <p>Hiring Comments</p>\n                    <p class=\"custom-comment\">{{hiring_comment}}</p>\n                    {% endif %}\n                </div>\n            </td>\n        </tr>\n    </table>\n    <div class=\"table-responsive\">\n        <table class=\"table table-list\">\n            <tbody>\n            <tr>\n                <th>Sr</th>\n                <th>Job Title & Start Time</th>\n                <th>Employee Name</th>\n                <th>Date of Timesheet</th>\n                <th>Pay Type</th>\n                <th>Hourly Rate</th>\n                <th>Hours</th>\n                <th>Total Amount</th>\n                <th>Status</th>\n            </tr>\n            {%- set row_no = namespace(row = 1) -%}\n            {%- set ts_list = doc.timesheet_used.replace(\"'\", \"\").strip('][').split(', ') -%}\n            {%- set final_list = frappe.db.get_all('Timesheet',filters={'name':['in',ts_list]},fields=['*'],order_by='employee_name,date_of_timesheet') -%}\n            {%- for ts_data in final_list -%}\n                {%- set status = [] -%}\n                {%- if ts_data.no_show -%}{{ status.append('No Show') or '' }}{%- endif -%}\n                {%- if ts_data.non_satisfactory -%}{{ status.append('Non Satisfactory') or '' }}{%- endif -%}\n                {%- if ts_data.dnr -%}{{ status.append('DNR') or '' }}{%- endif -%}\n                {%- if ts_data.replaced -%}{{ status.append('Replaced') or '' }}{%- endif -%}\n                {%- if ts_data.todays_overtime_hours==0-%}\n                    {%- if ts_data.timesheet_billable_amount > 0 -%}\n                        {%- set regular_pay= ts_data.timesheet_billable_amount -%}\n                        {%- set regular_hours=ts_data.total_hours -%}\n                        {%- set ot_pay=0 -%}\n                        {%- set ot_hours=0 -%}\n                    {%- else -%}\n                        {%- set child = frappe.db.get_value('Timesheet Detail', {'parent':ts_data.name}, ['extra_hours', 'extra_rate'])-%}\n                        {%- if  child[0]>0 -%}\n                            {%- set regular_pay= ts_data.total_billable_amount-child[1] -%}\n                            {%- set regular_hours=ts_data.total_hours-child[0] -%}\n                            {%- set ot_pay=child[1] -%}\n                            {%- set ot_hours=child[0] -%}\n                        {%- else -%}\n                            {%- set regular_pay= ts_data.total_billable_amount -%}\n                            {%- set regular_hours=ts_data.total_hours -%}\n                            {%- set ot_pay=0 -%}\n                            {%- set ot_hours=0 -%}\n                        {%- endif -%}\n                    {%- endif -%}\n                {%- else -%}\n                    {%- if ts_data.timesheet_billable_amount==ts_data.timesheet_billable_overtime_amount -%}\n                        {%- set regular_pay=0 -%}\n                        {%- set regular_hours=0 -%}\n                        {%- set ot_pay=ts_data.timesheet_billable_overtime_amount -%}\n                        {%- set ot_hours=ts_data.todays_overtime_hours -%}\n                    {%- else -%}\n                        {%- set regular_pay=ts_data.timesheet_billable_amount-ts_data.timesheet_billable_overtime_amount -%}\n                        {%- set regular_hours=ts_data.total_hours-ts_data.todays_overtime_hours -%}\n                        {%- set ot_pay= ts_data.timesheet_billable_overtime_amount-%}\n                        {%- set ot_hours=ts_data.todays_overtime_hours -%}\n                    {%- endif -%}\n                \n                {%- endif -%}\n                {%- set start_time=frappe.db.get_value(\"Timesheet Detail\", {'parent': ts_data.name}, [\"start_time\"]) -%}\n                {% set st = (start_time|string).split(\":\")[:-1]|join(\":\") %}\n                {% set st = \"{:0>5}\".format(st) %}\n                {%- if regular_pay>0 -%}\n                    <tr>\n                        <td style=\"width: 3%\">{{ row_no.row }}</td>\n                        <td style=\"width: 20%\">{{ ts_data.job_name }} ({{st}})</td>\n                        <td style=\"width: 20%\">{{ ts_data.employee_name }}</td>\n                        <td style=\"width: 20%\">{{ ts_data.date_of_timesheet.strftime('%m-%d-%Y') }}</td>\n                        <td style=\"width: 10%\">Regular</td>\n                        <td style=\"width: 10%\">{{ \"$%.2f\"|format(ts_data.per_hour_rate) }}</td>\n                        <td style=\"width: 10%\">{{ \"%.2f\"|format(regular_hours) }}h</td>\n                        <td style=\"width: 10%\">{{ \"$%.2f\"|format(regular_pay) }}</td>\n                        <td style=\"width: 20%\">{{ status|join(', ') }}</td>\n                    </tr>\n                    {% set row_no.row = row_no.row + 1 %}\n                {%- endif -%}\n                {%- if ot_pay>0 -%}\n                    <tr>\n                        <td style=\"width: 3%\">{{ row_no.row }}</td>\n                        <td style=\"width: 20%\">{{ ts_data.job_name }}</td>\n                        <td style=\"width: 20%\">{{ ts_data.employee_name }}</td>\n                        <td style=\"width: 20%\">{{ ts_data.date_of_timesheet.strftime('%m-%d-%Y') }}</td>\n                        <td style=\"width: 10%\">Overtime</td>\n                        <td style=\"width: 10%\">{{ \"$%.2f\"|format(ts_data.per_hour_rate) }}</td>\n                        <td style=\"width: 10%\">{{ \"%.2f\"|format(ot_hours) }}h</td>\n                        <td style=\"width: 10%\">{{ \"$%.2f\"|format(ot_pay) }}</td>\n                        <td style=\"width: 20%\">{{ status|join(', ') }}</td>\n                    </tr>\n                    {% set row_no.row = row_no.row + 1 %}\n                {%- endif -%}\n            {%- endfor -%}\n            {%- if doc.invoice_premium > 0 -%}\n                <tr>\n                    <td style=\"width: 3%\"></td>\n                    <td style=\"width: 40%\">{{\"%.3f\"|format(doc.invoice_premium)}}% Premium</td>\n                    <td style=\"width: 20%\"></td>\n                    <td style=\"width: 20%\"></td>\n                    <td style=\"width: 20%\"></td>\n                    <td style=\"width: 20%\"></td>\n                    <td style=\"width: 20%\"></td>\n                    <td style=\"width: 20%\">{{\"$%.2f\"|format(doc.total_billing_amount_premium-doc.total_billing_amount)}}</td>\n                </tr>\n            {%- endif -%}\n            </tbody>\n        </table>\n    </div>\n    <h5 class=\"footer-text\">Total: {{\"$%.2f\"|format(amount) }}</h5>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 0.0,
 "margin_left": 0.0,
 "margin_right": 0.0,
 "margin_top": 0.0,
 "modified": "2023-07-31 02:49:02.070202",
 "modified_by": "Administrator",
 "module": "Tag Workflow",
 "name": "Invoice Detailed View",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}